---
# applyTo: 'modules/converter/**'
name: 'Markdown_to_JSON_Converter'
description: '–ü—Ä–∞–≤–∏–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–æ—Ä–∞ MD ‚Üî JSON –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö'
---

# –ú–æ–¥—É–ª—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ MD ‚Üî JSON

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ú–æ–¥—É–ª—å `modules/converter/` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –º–µ–∂–¥—É Markdown –∏ JSON —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–≥—Ä–æ–≤–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–¥—É–ª—è

| –§–∞–π–ª | –≠–∫—Å–ø–æ—Ä—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|---------|------------|
| `__init__.py` | `convert_to_json`, `MarkdownToJsonConverter`, `DatabaseProcessor` | –ü—É–±–ª–∏—á–Ω—ã–π API –º–æ–¥—É–ª—è |
| `MarkdownToJsonConverter.py` | `convert_to_json`, `MarkdownToJsonConverter` | MD ‚Üí JSON –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è |
| `JsonToMarkdownConverter.py` | ‚Äî | JSON ‚Üí MD –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è |
| `database_processor.py` | `DatabaseProcessor` | –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ DataBase/ |
| `convert_archive_to_md.py` | ‚Äî | –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∞—Ä—Ö–∏–≤–æ–≤ —Å–µ—Å—Å–∏–π |

## –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å MD ‚Üí JSON

1. **–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö**: –ò–∑ –∏–≥—Ä–æ–≤—ã—Ö —Å–µ—Å—Å–∏–π/–∫–Ω–∏–≥ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –ø–æ –æ–±—ä–µ–∫—Ç–∞–º
2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ .md**: –î–∞–Ω–Ω—ã–µ –≤ —á–∏—Ç–∞–µ–º–æ–º –≤–∏–¥–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `DataBase/`
3. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è**: –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–æ–Ω–≤–µ—Ä—Ç–æ—Ä –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è `.md` ‚Üí `.json`
4. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è ID**: JSON —Å–æ–¥–µ—Ä–∂–∏—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID (SHA256, 8 —Å–∏–º–≤–æ–ª–æ–≤) –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
5. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–∏—Ç–∞–µ—Ç JSON –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ OpenAI

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

```
DataBase/
‚îú‚îÄ‚îÄ GlobalItems/              # –û–±—â–∏–µ –æ–±—ä–µ–∫—Ç—ã (—Ä—É—á–Ω–æ–µ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏–µ, MD ‚Üí JSON)
‚îÇ   ‚îú‚îÄ‚îÄ Armors/
‚îÇ   ‚îú‚îÄ‚îÄ Equipments/
‚îÇ   ‚îú‚îÄ‚îÄ Locations/
‚îÇ   ‚îú‚îÄ‚îÄ NPC/
‚îÇ   ‚îú‚îÄ‚îÄ Quests/
‚îÇ   ‚îú‚îÄ‚îÄ Spells/
‚îÇ   ‚îî‚îÄ‚îÄ Weapons/
‚îú‚îÄ‚îÄ open5e_download/            # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∏–∑ Open5e (—Ç–æ–ª—å–∫–æ JSON, JSON ‚Üí MD –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
‚îÇ   ‚îú‚îÄ‚îÄ Creatures/
‚îÇ   ‚îú‚îÄ‚îÄ Items/
‚îÇ   ‚îî‚îÄ‚îÄ Spells/
‚îú‚îÄ‚îÄ GameStoryBook/            # –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏–≥—Ä
‚îÇ   ‚îî‚îÄ‚îÄ [Scenario]/
‚îÇ       ‚îî‚îÄ‚îÄ Items/           # –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–∫ –≤ GlobalItems
‚îú‚îÄ‚îÄ AddonsStoryBook/          # –î–æ–ø–æ–ª–Ω–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ [Addon]/
‚îÇ       ‚îî‚îÄ‚îÄ Items/           # –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–∫ –≤ GlobalItems
‚îî‚îÄ‚îÄ Session/                  # –°–µ—Å—Å–∏–∏
    ‚îî‚îÄ‚îÄ [SessionName]/
        ‚îú‚îÄ‚îÄ archive_session.json  # –ê—Ä—Ö–∏–≤ ‚Üí MD —á–µ—Ä–µ–∑ convert_archive_to_md.py
        ‚îî‚îÄ‚îÄ Items/           # –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–∫ –≤ GlobalItems
```

## –ú–∞—Ä–∫–µ—Ä –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

**–§–∞–π–ª-–º–∞—Ä–∫–µ—Ä**: `toJson.md`

- –ï—Å–ª–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –µ—Å—Ç—å `toJson.md` ‚Äî —Å–æ–±—Ä–∞—Ç—å –≤—Å–µ `.md` —Ñ–∞–π–ª—ã –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
- –ï—Å–ª–∏ –Ω–µ—Ç `toJson.md` ‚Äî –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Ç–æ—Ä–∞

### –ë–∞–∑–æ–≤—ã–π –≤—ã–∑–æ–≤

```python
from modules.converter.MarkdownToJsonConverter import convert_to_json

# –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º —Ñ–∞–π–ª–∞
results = convert_to_json(
    source_file="path/to/items.md",
    split_by_separator=True  # –†–∞–∑–¥–µ–ª–∏—Ç—å –ø–æ ---
)
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

- `source_file` (str): –ü—É—Ç—å –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É `.md` —Ñ–∞–π–ª—É
- `output_filename` (Optional[str]): –ò–º—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ (–±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–µ—Ä—ë—Ç—Å—è –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞
- `output_dir` (Optional[str]): –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä—è–¥–æ–º —Å –∏—Å—Ö–æ–¥–Ω—ã–º —Ñ–∞–π–ª–æ–º
- `split_by_separator` (bool): –†–∞–∑–¥–µ–ª—è—Ç—å –ª–∏ —Ñ–∞–π–ª –ø–æ `---` –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ JSON —Ñ–∞–π–ª–æ–≤. **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é True –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

### –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

`List[str]` ‚Äî —Å–ø–∏—Å–æ–∫ –ø—É—Ç–µ–π –∫ —Å–æ–∑–¥–∞–Ω–Ω—ã–º JSON —Ñ–∞–π–ª–∞–º

## –§–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ .md —Ñ–∞–π–ª–∞

```markdown
# –ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞
tags: —Ç–µ–≥1, —Ç–µ–≥2, —Ç–µ–≥3

## –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞1
–ó–Ω–∞—á–µ–Ω–∏–µ1

## –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞2
- –≠–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ 1
- –≠–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ 2

---

# –î—Ä—É–≥–æ–π –æ–±—ä–µ–∫—Ç
tags: –¥—Ä—É–≥–∏–µ, —Ç–µ–≥–∏

## –°–≤–æ–π—Å—Ç–≤–æ
–ó–Ω–∞—á–µ–Ω–∏–µ
```

### –ü—Ä–∏–º–µ—Ä –≤—ã—Ö–æ–¥–Ω–æ–≥–æ JSON

```json
{
  "–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞": {
    "id": "a3f5c9e1",
    "tags": ["—Ç–µ–≥1", "—Ç–µ–≥2", "—Ç–µ–≥3"],
    "–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞1": "–ó–Ω–∞—á–µ–Ω–∏–µ1",
    "–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞2": ["–≠–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ 1", "–≠–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ 2"]
  }
}
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –±–æ—Ç

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ /admin –º–µ–Ω—é

1. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç `/admin`
2. –í—ã–±–∏—Ä–∞–µ—Ç "üìÅ –§–∞–π–ª—ã –∏ —Ä–µ—Å—É—Ä—Å—ã"
3. –ù–∞–∂–∏–º–∞–µ—Ç "üîÑ –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å/–û–±–Ω–æ–≤–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö JSON"
4. –ë–æ—Ç —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –º–∞—Ä–∫–µ—Ä–æ–º `toJson.md`
5. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ `.md` —Ñ–∞–π–ª—ã
6. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç—á—ë—Ç –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö

### –õ–æ–≥–∏–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

```python
# 1. –ü–æ–∏—Å–∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π —Å –º–∞—Ä–∫–µ—Ä–æ–º
directories_with_marker = []
for dir in database_dirs:
    if (dir / "toJson.md").exists():
        directories_with_marker.append(dir)

# 2. –°–±–æ—Ä .md —Ñ–∞–π–ª–æ–≤ (–∫—Ä–æ–º–µ –º–∞—Ä–∫–µ—Ä–∞)
md_files = []
for dir in directories_with_marker:
    md_files.extend([
        f for f in dir.glob("*.md")
        if f.name != "toJson.md"
    ])

# 3. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
for md_file in md_files:
    results = convert_to_json(
        source_file=str(md_file),
        split_by_separator=True
    )
```

## –í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `split_by_separator=True`** –¥–ª—è —Ñ–∞–π–ª–æ–≤ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
2. **–ù–µ —É–¥–∞–ª—è–π—Ç–µ –º–∞—Ä–∫–µ—Ä `toJson.md`** –ø–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
3. **–û–¥–∏–Ω `.md` —Ñ–∞–π–ª** –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã—Ö `---`
4. **ID –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
5. **–¢–µ–≥–∏** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ —Å–ø–∏—Å–æ–∫: `tags: a, b, c` ‚Üí `["a", "b", "c"]`
6. **–ö–æ–¥–∏—Ä–æ–≤–∫–∞**: –≤—Å–µ–≥–¥–∞ UTF-8
7. **–ó–∞–≥–æ–ª–æ–≤–∫–∏**: –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –¥–æ 10 —É—Ä–æ–≤–Ω–µ–π (`#` –¥–æ `##########`)

## JSON ‚Üí MD –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è

–î–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ Open5e –∏–ª–∏ –æ–±—Ä–∞—Ç–Ω–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `JsonToMarkdownConverter.py`.

## –ê—Ä—Ö–∏–≤—ã —Å–µ—Å—Å–∏–π

`convert_archive_to_md.py` –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç `archive_session.json` –≤ —á–∏—Ç–∞–µ–º—ã–π Markdown —Ñ–æ—Ä–º–∞—Ç.

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `MODULE_README.md` | –û–±—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è |
| `MARKDOWN_TO_JSON_QUICKSTART.md` | –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç MD‚ÜíJSON |
| `MARKDOWN_TO_JSON_README.md` | –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è MD‚ÜíJSON |
| `JSON_TO_MARKDOWN_QUICKSTART.md` | –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç JSON‚ÜíMD |
| `JSON_TO_MARKDOWN_README.md` | –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è JSON‚ÜíMD |
| `ARCHIVE_CONVERTER_README.md` | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞—Ä—Ö–∏–≤–æ–≤ |

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- `FileNotFoundError`: –ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω
- `ValueError`: –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ (–Ω–µ .md –∏ –Ω–µ .txt)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —á–µ—Ä–µ–∑ `modules.logger`

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è DatabaseProcessor

```python
from modules.converter import DatabaseProcessor
from pathlib import Path

processor = DatabaseProcessor(Path("DataBase"))
stats = processor.process_all()
print(f"–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {stats['files_converted']} —Ñ–∞–π–ª–æ–≤, —Å–æ–∑–¥–∞–Ω–æ: {stats['json_created']} JSON")
```
